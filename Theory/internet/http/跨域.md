# 跨域解决方法

Ajax实现

```tsx
ajax = function (url, method, body, successCb, failCb) {
  const request = new XMLHttpRequest()
  request.open(method, url);
  request.onreadystatechange = () => {
    if (request.readyState === 4) {
      if (request.state >= 200 && request.state < 300) {
        successCb.call(undefined, request.responseText);
      } else if (request.states >= 400) {
        failCb.call(undefined, request);
      }
    }
  }
  request.send(body);
}
```

## JSONP

利用的是<Script>中src可以设置为任意的url, 可以用来实现跨域

```html
<script type="text/javascript">
      // 得到航班信息查询结果后的回调函数
      var flightHandler = function(data){
          alert('你查询的航班结果是：票价 ' + data.price + ' 元，' + '余票 ' + data.tickets + ' 张。');
      };
      // 提供jsonp服务的url地址（不管是什么类型的地址，最终生成的返回值都是一段javascript代码）
      var url = "http://flightQuery.com/jsonp/flightResult.aspx?code=CA1998&callback=flightHandler";
      // 创建script标签，设置其属性
      var script = document.createElement('script');
      script.setAttribute('src', url);
      // 把script标签加入head，此时调用开始
      document.getElementsByTagName('head')[0].appendChild(script); 
    </script>
```

## CORS

通过 allow-controll-allow-access

 allow-controll-allow-origin

 allow-controll-allow-method等方式来设置跨域方式

## NGIX 反响代理

